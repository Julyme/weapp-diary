<view class='page'>
  <!-- <view class='headerimg' bindtap='headerimg'>
    <view wx:if="{{headerImgArr.length > 0 ? false : true}}">上传封面图</view>
    <image wx:if="{{headerImgArr.length > 0 ? true : false}}" src='{{headerImgArr[0]}}'></image>
  </view> -->

  <!-- 日历组件 -->
  <wux-calendar id="wux-calendar" />

  <view class='add-one'>
    <van-cell-group>
      <van-field  maxlength='20' value="{{ title }}" type="text" clearable label="旅行标题" placeholder="请输入旅行标题(20字以内)"  border="false" bind:input='addTitle' />
      <view hover-class='addT-hover' class='add-one-add' bindtap='headerimg'>旅行封面
        <!-- <image wx:if="{{headerImgArr.length > 0 ? false : true}}" src='../../images/moren.jpg'>
        </image> -->
        <image mode='aspectFill' wx:if="{{headerImgArr.length > 0 ? true : false}}" src='{{headerImgArr[0]}}'></image>
      </view>
      <!-- <van-field maxlength='20' value="{{ title }}" type="text" clearable label="旅行封面" placeholder="请输入旅行标题(20字以内)"  border="false" bind:input='addTitle' >
        <image slot="button" size="small" type="calm" bind:click='chooseWhere'>选择位置</image>
      </van-field> -->

      <van-field value="{{ where }}" type='text' center clearable label="旅行位置" placeholder="请选择" border="false"  use-button-slot bind:input='addWhere'>
        <!-- <picker slot='button' return:false> -->
        <wux-button slot="button" size="small" type="calm" bind:click='chooseWhere'>选择位置</wux-button>
        <!-- </picker> -->

      </van-field>


      <van-field value="{{ beginDate }}" type='text' disabled='false' center clearable label="旅行开始日期" placeholder="请选择" border="false"  use-button-slot>
        <!-- <wux-button slot="button" size="small" type="calm" bind:click='chooseStart'>
          <picker mode = date>选择日期</picker>
        </wux-button> -->
        <picker hover-class='chooseBtn-hover' class='picker' slot='button' mode='date' bindchange='chooseStart'>
          <wux-button size="small" type="calm">
            选择日期
          </wux-button>
        </picker>
      </van-field>

      <van-field value="{{ endDate }}" type='text' disabled='false' center clearable label="旅行结束日期" placeholder="请选择" border="false"  use-button-slot>
        <!-- <wux-button slot="button" size="small" type="calm" bind:click='chooseEnd'>选择日期</wux-button> -->
        <picker hover-class='chooseBtn-hover' class='picker' slot='button' mode='date' bindchange='chooseEnd'>
          <wux-button size="small" type="calm">
            选择日期
          </wux-button>
        </picker>
      </van-field>

      <van-field type='text' center disabled label="是否锁定" border="false"  use-button-slot >
        <!-- <picker slot='button' return:false> -->
        <van-switch slot='button' type='warning' id='lock-switch' class='lock-switch' checked="{{uploadObj.lock}}" size='28px' bind:change="changeLock" />
        <!-- </picker> -->

      </van-field>

    </van-cell-group>

  </view>

  <!-- <swiper indicator-dots="{{indicatorDots}}"
  autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
    <block class='add-list' wx:for='{{uploadObj.list}}' wx:for-index='main_index' wx:if='{{dayArr == 0 ? false : true}}' wx:key>
      <swiper-item> -->


  <view class='add-list' wx:for='{{uploadObj.list}}' wx:for-index='main_index' wx:if='{{dayArr == 0 ? false : true}}' wx:key>
    <view class='add-list-one'>
      <view class='add-footer'>
        <view>
          <wux-icon size='20' style='margin-top: 6rpx' class='add-time' type="md-time" />
          <view class='add-time'>{{item.date}}</view>

          <view class='add-switch'>
            是否显示
            <!-- <wux-switch value='{{value1}}' color='calm' bind:change='onchange1'/> -->
            <van-switch data-index='{{main_index}}' type='warning' class='add-ss' checked="{{ item.show }}" size='28' bind:change="onchange1" />
          </view>
        </view>
        <textarea value='{{item.text}}' data-index='{{main_index}}' maxlength='500' bindinput='getTextarea' placeholder='写下你的旅行日记吧(500字以内)'>
          <view>{{item.text.length}}/500</view>
        </textarea>
      </view>

      <view class='add-image'>
        <!-- wx:for='{{}}' -->
        <view class='add-full' data-url='{{item}}' catchtap='showbgimg' wx:for='{{uploadObj.list[main_index].trueImgs}}' wx:for-index='img_index' wx:key data-index='{{main_index}}'>
          <wux-icon class='add-delete' type='md-close-circle-outline' size='20' data-main='{{main_index}}' data-index='{{img_index}}' catchtap='delImg' />
          <image mode='aspectFill' src='{{item}}'></image>
        </view>

        <view data-index='{{main_index}}' class='add-full add-list-update' hover-class='addImg-hover' bindtap='chooseImg' wx:if='{{uploadObj.list[main_index].imgNum == 0 ? false : true}}'>
          <image src='../../images/add1.png'></image>
        </view>

      </view>
    </view>

  </view>

  <!-- </swiper-item>
    </block>
  </swiper> -->

  <wux-wing-blank size="default" style='margin-bottom: 14rpx;' wx:if='{{uploadObj.list.length == 0 ? false : true}}'>
    <!-- <wux-button class='update' block type='calm'>上传</wux-button>  -->
    <button hover-class='chooseBtn-hover' class='update' bindtap='uploadAll'>上传</button>
  </wux-wing-blank>
  <wux-toast id="wux-toast" />


  <!-- 评论 -->
  <view class='chat'>
    <view class='chat-header'>
      <wux-icon type='md-text' size='26' />
      <view class='chat-header-text'>评论列表 共{{travelObj.data.chat.length}}条评论</view>
    </view>
    <view class='chat-container'>
      <view class='chat-wrap' wx:if='{{travelObj.data.chat.length == 0 ? false : true}}'>
        <view class='chat-wrap-lists' wx:for='{{travelObj.data.chat}}' wx:key>
          <view class='chat-wrap-list'>
            <view class='chat-wrap-avatar'>
              <image src='{{item.avatar}}'></image>
            </view>
            <view class='chat-wrap-top'>
              <text>{{item.name}}</text> <text class='chat-wrap-time'>{{item.time}}</text> 
            </view>
            <view class='chat-wrap-center'>
              {{item.text}} <view style='display: inline-block' class='chat-wrap-huifu' bindtap='chattochat' hover-class='huifuHover'>回复</view>
            </view>

            <!-- 楼中楼 -->
            <view class='chat-wrap-child' wx:for='{{item.follow}}' wx:for-index='{{fIndex}}' wx:for-item='{{fItem}}' wx:key>
              <view class='chat-wrap-avatar chat-wrap-avatar1'>
                <image src='{{fItem.avatar}}'></image>
              </view>
              <view class='chat-wrap-top'>
                <text>{{fItem.name}}</text> {{fItem.time}}
              </view>
              <view class='chat-wrap-center'>
                {{fItem.text}}
              </view>
            </view>
          </view>
        </view>
      </view>
      <view class='chat-nowrap' wx:if='{{travelObj.data.chat.length == 0 ? true : false}}'>
        一条评论也没有呀~
      </view>
    </view>
    <view class='chat-write'>
      <view class='chat-write-header'>
        <wux-icon type='md-paper-plane' size='26' />
        <view class='chat-write-header-text'>发表评论</view>
      </view>
      <view class='chat-write-textarea'>
        <textarea maxlength='100' value='{{chatData}}' placeholder='留下你的评论呀~' bindinput='getChat'>

          <view class='chat-write-footer'>
            <view class='chat-write-num'>{{chatData.length}}/100</view>
            <view class='chat-write-btn'>
              <wux-button block size='small' type="calm" bindtap='uploadChat'>回复</wux-button>
            </view>
          </view>
        </textarea>
      </view>
    </view>
  </view>

</view>