<view class='page'>

  <!-- 日历组件 -->
  <wux-calendar id="wux-calendar" />

  <view class='add-one'>
    <van-cell-group>
      <van-field 
        maxlength='20' 
        value="{{ title }}" 
        type="text" 
        clearable
        label="旅行标题" 
        placeholder="请输入旅行标题(20字以内)" 
        required 
        border="false" 
        bind:input='addTitle' />

      <van-field
        value="{{ where }}"
        type='text'                   
        center
        clearable
        label="旅行位置"
        placeholder="请选择"
        border="false"
        required
        use-button-slot
        bind:input='addWhere'
      >
        <!-- <picker slot='button' return:false> -->
          <wux-button slot="button" size="small" type="energized" bind:click='chooseWhere'>选择位置</wux-button>
        <!-- </picker> -->
        
      </van-field>


      <van-field
        value="{{ beginDate }}"
        type='text'
        disabled='false'
        center
        clearable
        label="旅行开始日期"
        placeholder="请选择"
        border="false"
        required
        use-button-slot
      >
        <!-- <wux-button slot="button" size="small" type="energized" bind:click='chooseStart'>
          <picker mode = date>选择日期</picker>
        </wux-button> -->
        <picker hover-class='chooseBtn-hover' class='picker' slot='button' mode='date' bindchange='chooseStart'>
          <wux-button size="small" type="energized">
            选择日期
          </wux-button>
        </picker>
      </van-field>

      <van-field
        value="{{ endDate }}"
        type='text'
        disabled='false'
        center
        clearable
        label="旅行结束日期"
        placeholder="请选择"
        border="false"
        required
        use-button-slot
      >
        <!-- <wux-button slot="button" size="small" type="energized" bind:click='chooseEnd'>选择日期</wux-button> -->
        <picker hover-class='chooseBtn-hover' class='picker' slot='button' mode='date' bindchange='chooseEnd'>
          <wux-button size="small" type="energized">
            选择日期
          </wux-button>
        </picker>
      </van-field>    

    </van-cell-group>

  </view>

  <view class='add-list' wx:for='{{uploadObj.list}}' wx:for-index='main_index' wx:if='{{dayArr == 0 ? false : true}}' wx:key>
    <view class='add-list-one'>
      <view class='add-footer'>
        <view>
          <wux-icon size='24' style='margin-top: 6rpx' class='add-time' type="md-time" />
          <view class='add-time'>{{item.date}}</view>
          <view class='add-switch'>
            是否显示
            <!-- <wux-switch value='{{value1}}' color='energized' bind:change='onchange1'/> -->
            <van-switch data-index='{{main_index}}' type='warning' class='add-ss' checked="{{ item.show }}" size='28' bind:change="onchange1" />
          </view>
        </view>
        <textarea value='{{item.text}}' data-index='{{main_index}}' maxlength='120' bindinput='getTextarea' placeholder='写下你的旅行日记吧(120字以内)'>
          <view>{{item.text.length}}/120</view>
        </textarea>
      </view>

      <view class='add-image'>
        <!-- wx:for='{{}}' -->
        <view class='add-full'  data-url='{{item}}' catchtap='showbgimg' wx:for='{{uploadObj.list[main_index].trueImgs}}'  wx:for-index='img_index' wx:key data-index='{{main_index}}'>
          <wux-icon class='add-delete' type='md-close-circle-outline' size='20' data-main='{{main_index}}' data-index='{{img_index}}' catchtap='delImg' />
          <image src='{{item}}' ></image>
        </view>

        <view data-index='{{main_index}}' class='add-full add-list-update' hover-class='addImg-hover' bindtap='chooseImg' wx:if='{{uploadObj.list[main_index].imgNum == 0 ? false : true}}'>
          <image src='../../images/add1.png'></image>
        </view> 
             
      </view>
    </view>

  </view>

  <wux-wing-blank size="default" style='margin-bottom: 14rpx;' wx:if='{{uploadObj.list.length == 0 ? false : true}}'>
    <!-- <wux-button class='update' block type='energized'>上传</wux-button>  -->
    <button hover-class='chooseBtn-hover' class='update' bindtap='uploadAll'>上传</button>
  </wux-wing-blank>
  <wux-toast id="wux-toast" />
   
</view>