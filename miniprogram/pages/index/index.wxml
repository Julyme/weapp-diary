<!--index.wxml-->
<view class='index-top'>
  <!-- 搜索框 -->
  <view class='index-search'>
    <van-search value="{{ searchVal }}" bindchange='changeSearch' placeholder="请输入搜索关键词" use-action-slot>
      <view slot="action" bindtap="getSearch">搜索</view>
    </van-search>
  </view>
  <!-- 选择列表 -->
  <view class='index-choose'>
    <view class='index-choose-list' bindtap='changelistcolor' wx:for='{{listArr}}' data-index='{{index}}' style='color: {{item.color}}; background-color: {{item.bgcolor}}' wx:key>{{item.name}}</view>
  </view>

  <!-- 分割线 -->
  <view class='index-border'>
    <wux-divider show-text="{{ false }}" />
  </view>
</view>

<view class="container">
  <!-- <scroll-view scroll-y='true' style='width: 100%;'> -->
  <wux-toptips id="wux-toptips" />
  <!-- <button class='getInfo' open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo" wx:if='{{!shouquan}}'>获取授权</button> -->

  <view class='index' data-openid='{{item._openid}}' data-id='{{item._id}}' wx:for='{{travelList}}' wx:key wx:if='{{item.data.show}}' bindtap='todetail' data-lock='{{item.data.lock}}'>
    <view class='delTravel' catchtap='delTravel' data-lock='{{item.data.lock}}' data-index='{{index}}' data-id='{{item._id}}' data-openid='{{item._openid}}'>
      <wux-icon type='{{item.data.lock == true ? "md-lock" : "md-unlock" }}' size='20' />
    </view>
    <view class='index-wrap'>
      <image lazy-load='{{lazyloadBol}}' mode='aspectFill' src='{{item.data.headerImg}}'></image>
      <view class='index-title'>{{item.data.title}}</view>
      <view class='index-smtitle'>
        <text>{{item.data.sDate}} {{item.data.day}}天 {{item.data.see}}次浏览</text>
        <text>{{item.data.where}}</text>
      </view>

      <view class='index-footer'>
        <view class='index-footer-left'>
          <image src='{{item.data.userInfo.avatarUrl}}'></image>
          <view>by {{item.data.userInfo.nickName}}</view>
        </view>
        <view class='index-footer-right'>
          <view class='index-footer-one' data-id='{{item._id}}' data-index='{{index}}' catchtap='addLike'>
            <!-- <image src='../../images/like.png'></image> -->
            <wux-icon class='ii' type='{{likeArr[index] == 0 ? "md-heart-empty" : "md-heart" }}' size='24' />
            <view>{{item.data.like}}</view>
          </view>
          <view class='index-footer-one' data-id='{{item._id}}' data-index='{{index}}' catchtap='addStar'>
            <!-- <image src='../../images/star.png'></image> -->
            <wux-icon class='ii' type='{{starArr[index] == 0 ? "md-star-outline" : "md-star" }}' size='24' />
            <view>{{item.data.star}}</view>
          </view>
          <!-- <view class='index-footer-one'>
              <image src='../../images/chat.png'></image>
              <view>1111</view>         
            </view> -->
        </view>
      </view>
    </view>
  </view>
  <!-- </view> -->

  <wux-floating-button actionRotate='{{rotateBol}}' position="bottomRight" theme="calm" bind:change="addTravel" bind:click="addTravel" style='display: {{showAdd}}' />
  <!-- </scroll-view> -->
</view>